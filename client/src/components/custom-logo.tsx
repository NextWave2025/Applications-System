import React, { useState, useEffect } from 'react';
import NextWaveLogo from "../assets/NextWave-logo-Primary-red.svg";

interface CustomLogoProps {
  className?: string;
  variant?: "default" | "white";
}

export default function CustomLogo({ className = "", variant = "default" }: CustomLogoProps) {
  const [logoUrl, setLogoUrl] = useState<string | null>(null);
  
  // Load logo URL from localStorage
  useEffect(() => {
    const savedLogoUrl = localStorage.getItem('customLogoUrl');
    if (savedLogoUrl) {
      setLogoUrl(savedLogoUrl);
    }
  }, []);
  
  // If a custom logo is set, show it
  if (logoUrl) {
    return (
      <div className={`flex items-center ${className}`}>
        <img 
          src={logoUrl} 
          alt="Custom Logo" 
          className="h-10 object-contain"
          onError={() => {
            console.error("Error loading custom logo");
            setLogoUrl(null);
            localStorage.removeItem('customLogoUrl');
          }}
        />
      </div>
    );
  }
  
  // Use the new Guide logo SVG
  return (
    <div className={`flex items-center ${className}`}>
      {variant === "white" ? (
        // White variant for dark backgrounds
        <svg width="120" height="30" viewBox="0 0 644 202" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M240.036 201.636C228.32 201.636 217.886 199.164 208.733 194.222C199.763 189.279 192.715 182.414 187.59 173.628C182.464 164.841 179.901 154.681 179.901 143.149V66.2642H216.147V142.325C216.147 147.817 217.062 152.576 218.893 156.603C220.723 160.448 223.469 163.376 227.13 165.39C230.791 167.404 235.093 168.411 240.036 168.411C247.541 168.411 253.399 166.122 257.609 161.546C261.82 156.969 263.925 150.562 263.925 142.325V66.2642H299.896V143.149C299.896 154.864 297.333 165.115 292.207 173.902C287.265 182.689 280.217 189.554 271.064 194.496C262.094 199.256 251.752 201.636 240.036 201.636Z" fill="#FFFFFF"/>
          <path d="M314.812 198.89V66.2642H351.057V198.89H314.812ZM332.934 44.8464C327.076 44.8464 322.225 42.9243 318.381 39.0801C314.537 35.0528 312.615 30.1102 312.615 24.2524C312.615 18.5776 314.537 13.7265 318.381 9.69925C322.225 5.67197 327.076 3.65833 332.934 3.65833C338.975 3.65833 343.826 5.67197 347.487 9.69925C351.332 13.7265 353.254 18.5776 353.254 24.2524C353.254 30.1102 351.332 35.0528 347.487 39.0801C343.826 42.9243 338.975 44.8464 332.934 44.8464Z" fill="#FFFFFF"/>
          <path d="M425.208 201.636C412.943 201.636 401.96 198.615 392.258 192.574C382.556 186.533 374.867 178.296 369.193 167.861C363.701 157.427 360.955 145.711 360.955 132.714C360.955 119.534 363.701 107.727 369.193 97.2925C374.867 86.8582 382.464 78.6206 391.983 72.5797C401.685 66.5388 412.76 63.5183 425.208 63.5183C434.727 63.5183 443.24 65.4404 450.745 69.2846C458.433 73.1288 464.566 78.5291 469.142 85.4853C473.902 92.2584 476.465 99.9468 476.831 108.551V155.78C476.465 164.383 473.993 172.163 469.417 179.119C464.84 186.076 458.708 191.567 451.02 195.595C443.331 199.622 434.727 201.636 425.208 201.636ZM431.249 168.411C438.022 168.411 443.88 166.946 448.823 164.017C453.948 160.905 457.884 156.695 460.63 151.386C463.559 145.894 465.023 139.579 465.023 132.44C465.023 125.483 463.559 119.351 460.63 114.042C457.884 108.551 453.948 104.34 448.823 101.411C443.88 98.2993 438.114 96.7433 431.524 96.7433C424.751 96.7433 418.801 98.2993 413.676 101.411C408.733 104.523 404.797 108.734 401.868 114.042C399.123 119.351 397.75 125.483 397.75 132.44C397.75 139.579 399.123 145.894 401.868 151.386C404.797 156.695 408.825 160.905 413.95 164.017C419.076 166.946 424.842 168.411 431.249 168.411ZM498.798 198.89H463.101V163.193L468.868 130.792L462.827 98.94V0.363281H498.798V198.89Z" fill="#FFFFFF"/>
          <path d="M580.32 201.636C566.408 201.636 554.051 198.707 543.251 192.849C532.45 186.808 523.847 178.57 517.44 168.136C511.216 157.702 508.104 145.803 508.104 132.44C508.104 119.259 511.124 107.544 517.165 97.2925C523.389 86.8582 531.81 78.6206 542.427 72.5797C553.044 66.3557 564.852 63.2437 577.849 63.2437C590.663 63.2437 601.921 66.1726 611.623 72.0305C621.508 77.7053 629.196 85.5768 634.688 95.645C640.363 105.53 643.2 116.788 643.2 129.419C643.2 131.799 643.017 134.27 642.651 136.833C642.468 139.213 642.011 141.959 641.278 145.071L529.796 145.345V118.436L624.528 118.161L609.975 129.419C609.609 121.548 608.145 114.958 605.582 109.649C603.202 104.34 599.633 100.313 594.873 97.5671C590.297 94.6382 584.622 93.1737 577.849 93.1737C570.709 93.1737 564.485 94.8212 559.177 98.1163C553.868 101.228 549.749 105.713 546.82 111.571C544.074 117.246 542.702 124.019 542.702 131.89C542.702 139.945 544.166 146.993 547.095 153.034C550.207 158.892 554.6 163.468 560.275 166.763C565.95 169.875 572.54 171.431 580.045 171.431C586.819 171.431 592.951 170.333 598.443 168.136C603.934 165.756 608.694 162.278 612.721 157.702L633.864 178.845C627.457 186.35 619.586 192.025 610.25 195.869C601.097 199.713 591.12 201.636 580.32 201.636Z" fill="#FFFFFF"/>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M125.173 99.8505C119.6 81.998 103.297 69.0748 84.0525 69.0748C64.8084 69.0748 48.5052 81.998 42.9316 99.8505H1.78906C8.10971 59.0623 42.534 27.8867 84.0525 27.8867C125.571 27.8867 159.995 59.0623 166.316 99.8505H125.173Z" fill="#FFFFFF"/>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M84.0529 157.704C96.2505 157.704 107.267 152.512 115.118 144.163H87.512V116.332H167.354V198.89H140.238V176.517C125.425 190.414 105.704 198.892 84.0529 198.892C39.0053 198.892 2.30939 162.191 0.799805 116.332H40.9742C42.4483 139.434 61.1719 157.704 84.0529 157.704Z" fill="#FFFFFF"/>
        </svg>
      ) : (
        // Default variant with red accent
        <img 
          src={NextWaveLogo} 
          alt="NextWave Logo" 
          className="h-9 object-contain"
        />
      )}
    </div>
  );
}